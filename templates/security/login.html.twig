{% block stylesheets %}
    {{ encore_entry_link_tags('app') }}
    <style>
        body {
            background: #f5f6fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .screen {
            background: #fff;
            padding: 40px 35px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            width: 400px;
            margin: 50px auto;
        }
        .switch-btn {
            margin: 0 5px;
        }
        .login_submit {
            width: 100%;
            margin-top: 15px;
        }
        .back-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: #3498db; /* bleu */
            color: #fff;
            font-size: 20px;
            font-weight: bold;
            text-decoration: none;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            transition: background 0.2s;
            margin: 1% 0 0 1%;
        }

        .back-button:hover {
            background: #2980b9; /* bleu foncÃ© au survol */
        }
    </style>
{% endblock %}

{% block body %}
    <a href="{{ path('index') }}" class="back-button">&#8592;</a>

    <div class="screen">
        <h2 class="text-center mb-4">Login</h2>

        {% if error %}
            <div class="alert alert-danger text-center">
                {{ error.messageKey|trans(error.messageData, 'security') }}
            </div>
        {% endif %}

        <div class="text-center mb-4">
            <button id="studentBtn" type="button" class="btn btn-outline-primary switch-btn active">Ã‰tudiant</button>
            <button id="teacherBtn" type="button" class="btn btn-outline-secondary switch-btn">Professeur</button>
        </div>

        {# --- FORMULAIRE Ã‰TUDIANT --- #}
        <form id="studentForm" method="post">
            <input type="hidden" name="_login_type" value="student">
            <input type="hidden" name="_target_path" value="/student">

            <div class="mb-3">
                <input type="email"
                       name="email"
                       value="{{ last_username }}"
                       class="form-control"
                       placeholder="Email âœ‰ï¸"
                       required
                       autofocus>
            </div>
            <div class="mb-3">
                <input type="password"
                       name="password"
                       class="form-control"
                       placeholder="Password ðŸ”’"
                       required>
            </div>

            {# Checkbox Remember Me (Ã‰tudiant) #}
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" name="_remember_me" id="remember_me_student">
                <label class="form-check-label" for="remember_me_student">Se souvenir de moi</label>
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <button class="btn btn-primary login_submit" type="submit">Login Ã‰tudiant</button>
        </form>


        {# --- FORMULAIRE PROFESSEUR --- #}
        <form id="teacherForm" class="d-none" method="post">
            <input type="hidden" name="_login_type" value="teacher">
            <input type="hidden" name="_target_path" value="/teacher">

            <div class="mb-3">
                <input type="email"
                       name="email"
                       value="{{ last_username }}"
                       class="form-control"
                       placeholder="Email âœ‰ï¸"
                       required>
            </div>
            <div class="mb-3">
                <input type="password"
                       name="password"
                       class="form-control"
                       placeholder="Password ðŸ”’"
                       required>
            </div>

            {# Checkbox Remember Me (Prof) #}
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" name="_remember_me" id="remember_me_teacher">
                <label class="form-check-label" for="remember_me_teacher">Se souvenir de moi</label>
            </div>

            <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

            <button class="btn btn-primary login_submit" type="submit">Login Professeur</button>

        </form>
        <a>
            you don't have an account? <a href="{{ path('app_register') }}">Register</a>
        </a>
    </div>
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('app') }}
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const studentBtn = document.getElementById('studentBtn');
            const teacherBtn = document.getElementById('teacherBtn');
            const studentForm = document.getElementById('studentForm');
            const teacherForm = document.getElementById('teacherForm');

            studentBtn.addEventListener('click', (e) => {
                e.preventDefault(); // EmpÃªche le comportement par dÃ©faut

                studentForm.classList.remove('d-none');
                teacherForm.classList.add('d-none');

                // Gestion des classes CSS pour l'apparence active/inactive
                studentBtn.classList.add('active', 'btn-outline-primary');
                studentBtn.classList.remove('btn-outline-secondary');

                teacherBtn.classList.remove('active', 'btn-outline-primary');
                teacherBtn.classList.add('btn-outline-secondary');
            });

            teacherBtn.addEventListener('click', (e) => {
                e.preventDefault(); // EmpÃªche le comportement par dÃ©faut

                teacherForm.classList.remove('d-none');
                studentForm.classList.add('d-none');

                // Gestion des classes CSS pour l'apparence active/inactive
                teacherBtn.classList.add('active', 'btn-outline-primary');
                teacherBtn.classList.remove('btn-outline-secondary');

                studentBtn.classList.remove('active', 'btn-outline-primary');
                studentBtn.classList.add('btn-outline-secondary');
            });
        });
    </script>
{% endblock %}